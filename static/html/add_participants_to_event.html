<!DOCTYPE html>
<html ng-app="SVBE">
  <head>
    <!-- Libraries (same for all pages)-->
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css"
          rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.js"></script>
    <script src="../js/bootstrap/ui-bootstrap-tpls-0.5.0.js"></script>
    
    <!-- Code for this page -->
    <script src="../js/person.js" type="text/javascript"></script>
    <script src="../js/default_configs.js" type="text/javascript"></script>
    <script src="../js/svbe.js" type="text/javascript"></script>
    <script src="../js/add_participants_to_event.js"
            type="text/javascript"></script>
  
    <meta charset="utf-8">
    
    <title>Add participants to event</title>
    <style type="text/css">
    .event_status_table {
      width: 90%;
    }
    </style>
  </head>
  
  <body ng-controller="AddParticipantsToEventController">
    <div class="container">
      <h3>Event status</h3>
      <table class="event-status-table table table-striped table-bordered">
        <tr>
          <th>Role</th>
          <th># Registered</th>
          <th># Still Needed</th>
        </tr> 
        <tr ng-repeat="(role, count) in eventRoles">
          <td>{{role}}</td>
          <td>{{personEventRoles[role] || 0}}</td>
          <td>{{count - (personEventRoles[role] || 0)}}</td>
        </tr>
      </table>
    
      <form class="form-search" ng-submit="getPeopleByPartialName()">
        <div class="control-group">
          <label for="person-name" class="label">Name</label>
          <input type="text" id="person-name" ng-model="personSearchName"
                 class="input-medium search-query"/>
          <button class="btn">Search</button>
        </div>
      </form>
    
      <div class="btn-group">
        <div ng-repeat="(key, person) in possiblePeople">
          <button type="button" class="btn" btn-radio="key" 
                  ng-model="$parent.selectedPersonKey">
            {{person.full_name}} - {{person.email}}
          </button>
        </div>
      </div> <!-- btn-group -->
    
      <div class="next-btn" ng-show="selectedPersonKey">
        <div ng-repeat="role in getSelectedPerson().roles">
          <button class="btn btn-primary"
                  ng-click="registerPerson(role['key'])">
            Register person as {{role['role_type']}}
          </button>
        </div>
      </div>
      
      <div class="text-error" ng-show="registrationError">
        {{registrationError}}
      </div>
    </div>
  </body>
</html>
